<img id='im'>

<script>

function consume(reader,res) {
  var total = 0
  return pump()
  function pump() {
    return reader.read().then(({done, value}) => {
      if (done) {console.log('fin')
        return res // res
      }
      total += value.byteLength
      console.log(`received ${value.byteLength} bytes (${total} bytes in total)`)
      return pump()
    })
  }
}

fetch("IMG_20170813_165005.jpg")  //IMG_20170815_140619.jpg
  .then(res => {if(res.body) consume(res.body.getReader(),res); else return res})  // 
  .then(res => res.blob())
  .then(blob => im.src=URL.createObjectURL(blob))
  .catch(e => console.log("something went wrong: " + e))
  //if(res.body) 
</script>
